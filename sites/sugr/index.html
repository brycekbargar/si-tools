<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Spirit island Uh-pinionated Game Randomizer</title>
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<meta name="description" content="" />

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">

	<script
		src="https://cdn.jsdelivr.net/npm/apache-arrow@14.0.2/Arrow.es2015.min.js"
		integrity="sha256-u0QCfE1GZRVdhnaoZPHBLd1mkJTldGwhuKA47FlsEGA="
		crossorigin="anonymous">
	</script>
</head>
<body>
	<table id="choices">
		<tr>
			<th rowspan="5" style="transform: rotate(-90deg)">Complexity</th>
			<td><button data-complexity="03" data-difficulty="00" onclick="randomGame(this)">0, 3</button></td>
			<td><button data-complexity="03" data-difficulty="01" onclick="randomGame(this)">1, 3</button></td>
			<td><button data-complexity="03" data-difficulty="02" onclick="randomGame(this)">2, 3</button></td>
			<td><button data-complexity="03" data-difficulty="03" onclick="randomGame(this)">3, 3</button></td>
			<td><button data-complexity="03" data-difficulty="04" onclick="randomGame(this)">4, 3</button></td>
		</tr>
		<tr>
			<td><button data-complexity="02" data-difficulty="00" onclick="randomGame(this)">0, 2</button></td>
			<td><button data-complexity="02" data-difficulty="01" onclick="randomGame(this)">1, 2</button></td>
			<td><button data-complexity="02" data-difficulty="02" onclick="randomGame(this)">2, 2</button></td>
			<td><button data-complexity="02" data-difficulty="03" onclick="randomGame(this)">3, 2</button></td>
			<td><button data-complexity="02" data-difficulty="04" onclick="randomGame(this)">4, 2</button></td>
		</tr>
		<tr>
			<td><button data-complexity="01" data-difficulty="00" onclick="randomGame(this)">0, 1</button></td>
			<td><button data-complexity="01" data-difficulty="01" onclick="randomGame(this)">1, 1</button></td>
			<td><button data-complexity="01" data-difficulty="02" onclick="randomGame(this)">2, 1</button></td>
			<td><button data-complexity="01" data-difficulty="03" onclick="randomGame(this)">3, 1</button></td>
			<td><button data-complexity="01" data-difficulty="04" onclick="randomGame(this)">4, 1</button></td>
		</tr>
		<tr>
			<td><button data-complexity="00" data-difficulty="00" onclick="randomGame(this)">0, 0</button></td>
			<td><button data-complexity="00" data-difficulty="01" onclick="randomGame(this)">1, 0</button></td>
			<td><button data-complexity="00" data-difficulty="02" onclick="randomGame(this)">2, 0</button></td>
			<td><button data-complexity="00" data-difficulty="03" onclick="randomGame(this)">3, 0</button></td>
			<td><button data-complexity="00" data-difficulty="04" onclick="randomGame(this)">4, 0</button></td>
		</tr>
		<tr>
			<th colspan="6">Difficulty<th>
		</tr>
	</table>

	<h3 id="game"></h3>

	<script type="text/javascript">
		const sugr = window.sugr = {}

		async function randomGame(element) {
			const difficulty = element.dataset.difficulty;
			const complexity = element.dataset.complexity;

			const games = sugr.games = await Arrow.tableFromIPC(fetch(`/3102${difficulty}${complexity}.arrow`));
			randomGame = Math.floor(Math.random() * games.stats.numRows)

			document.getElementById("game").innerHTML = games.get(randomGame).toString()
		}
	</script>
</body>
</html>
